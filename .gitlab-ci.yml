# image: node:20
# variables:
#   CI: 'true'

# # Main job
# CI:
#   interruptible: true
#   only:
#     - main
#     - merge_requests
#   script:
#     - echo "done"
#     # # This enables task distribution via Nx Cloud
#     # # Run this command as early as possible, before dependencies are installed
#     # # Learn more at https://nx.dev/ci/reference/nx-cloud-cli#npx-nxcloud-startcirun
#     # # Uncomment this line to enable task distribution
#     # # - npx nx-cloud start-ci-run --distribute-on="3 linux-medium-js" --stop-agents-after="e2e-ci"

#     # - npm ci --legacy-peer-deps
#     # - npx playwright install --with-deps
#     # - NX_HEAD=$CI_COMMIT_SHA
#     # - NX_BASE=${CI_MERGE_REQUEST_DIFF_BASE_SHA:-$CI_COMMIT_BEFORE_SHA}

#     # # Prepend any command with "nx-cloud record --" to record its logs to Nx Cloud
#     # # - npx nx-cloud record -- echo Hello World
#     # # Nx Affected runs only tasks affected by the changes in this PR/commit. Learn more: https://nx.dev/ci/features/affected
#     # # When you enable task distribution, run the e2e-ci task instead of e2e
#     # - npx nx affected -t lint test build e2e


image: docker:latest

variables:
  REGISTRY: registry.gitlab.com/epay8223444/epay-admin
  IMAGE_NAME: $REGISTRY

stages:
  - build

# services:
#   - docker:dind

# before_script:
#   - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $REGISTRY

build-image:
  stage: build
  script:
    - echo $REGISTRY
    - echo $IMAGE_NAME
    - echo $CI_REGISTRY_USER
    - echo $CI_REGISTRY_TOKEN
  only:
    - main
